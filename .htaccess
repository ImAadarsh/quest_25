RewriteEngine On

# Don't redirect the maintenance page itself
RewriteCond %{REQUEST_URI} !^/maintenance\.php$

# Don't redirect assets
RewriteCond %{REQUEST_URI} !^/assets/.*$
RewriteCond %{REQUEST_URI} !^/quest/.*$
RewriteCond %{REQUEST_URI} !^/favicon\.ico$

# Redirect everything else to maintenance page
RewriteRule ^(.*)$ /maintenance.php [R=302,L]

# Prevent directory listing
Options -Indexes

# Protect .htaccess file
<Files .htaccess>
    Order allow,deny
    Deny from all
</Files> 